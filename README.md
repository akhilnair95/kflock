Please see the link below for the details
https://www.researchgate.net/publication/317385211_Partial_File_locking_with_keys_in_the_Linux_kernel 

The test scripts and the sample C program are available in the test_scripts folder
